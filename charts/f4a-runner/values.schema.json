{
	"$schema": "https://json-schema.org/schema#",
	"type": "object",
	"properties": {
		"imagePullSecrets": {
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"name": {
						"type": "string",
						"minLength": 1
					}
				},
				"required": ["name"]
			}
		},
		"gateway": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string",
					"minLength": 1,
					"description": "Resource name for the gateway Deployment and Service."
				},
				"image": {
					"type": "string",
					"minLength": 1
				},
				"imagePullPolicy": {
					"type": "string"
				},
				"replicas": {
					"type": "integer",
					"minimum": 1
				},
				"service": {
					"type": "object",
					"properties": {
						"type": { "type": "string" },
						"port": { "type": "integer" }
					},
					"required": ["port"]
				},
				"resources": {
					"type": "object"
				}
			},
			"required": ["name", "image", "service"]
		},
		"dispatch": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string",
					"minLength": 1,
					"description": "Resource name for the dispatch Deployment."
				},
				"serviceAccountName": {
					"type": "string",
					"minLength": 1,
					"description": "ServiceAccount name used by dispatch."
				},
				"image": {
					"type": "string",
					"minLength": 1
				},
				"imagePullPolicy": {
					"type": "string"
				},
				"replicas": {
					"type": "integer",
					"minimum": 1
				},
				"metricsInterval": {
					"type": "string",
					"minLength": 1,
					"description": "Interval between metrics refreshes, e.g. 5s."
				},
				"scoreEmaAlpha": {
					"type": "string",
					"minLength": 1,
					"description": "EMA alpha for worker scoring, between 0 and 1."
				},
				"service": {
					"type": "object",
					"properties": {
						"port": { "type": "integer" }
					},
					"required": ["port"]
				},
				"resources": {
					"type": "object"
				}
			},
			"required": [
				"name",
				"serviceAccountName",
				"image",
				"service",
				"metricsInterval",
				"scoreEmaAlpha"
			]
		},
		"worker": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string",
					"minLength": 1,
					"description": "Resource name for the worker StatefulSet and headless Service."
				},
				"image": {
					"type": "string",
					"minLength": 1
				},
				"imagePullPolicy": {
					"type": "string"
				},
				"replicas": {
					"type": "integer",
					"minimum": 1
				},
				"service": {
					"type": "object",
					"properties": {
						"port": { "type": "integer" }
					},
					"required": ["port"]
				},
				"resources": {
					"type": "object"
				}
			},
			"required": ["name", "image", "service"]
		},
		"fdb": {
			"type": "object",
			"properties": {
				"clusterFile": {
					"type": "object",
					"properties": {
						"secret": {
							"type": "object",
							"properties": {
								"name": {
									"type": "string",
									"description": "Name of the Secret that contains the FoundationDB cluster file.",
									"minLength": 1
								},
								"key": {
									"type": "string",
									"description": "Key within the Secret for the cluster file.",
									"minLength": 1
								}
							},
							"required": ["name"]
						},
						"writable": {
							"type": "object",
							"properties": {
								"enabled": {
									"type": "boolean",
									"description": "Whether to copy the cluster file into a writable emptyDir."
								},
								"mountPath": {
									"type": "string",
									"description": "Filesystem path where the writable cluster file is mounted inside containers.",
									"minLength": 1
								},
								"sourceMountPath": {
									"type": "string",
									"description": "Filesystem path where the source Secret is mounted for the init container.",
									"minLength": 1
								},
								"initImage": {
									"type": "string",
									"description": "Container image used to copy the cluster file into the writable volume.",
									"minLength": 1
								}
							},
							"required": ["enabled", "mountPath", "sourceMountPath", "initImage"]
						}
					},
					"required": ["secret", "writable"]
				}
			},
			"required": ["clusterFile"]
		}
	},
	"required": ["gateway", "dispatch", "worker", "fdb"]
}
